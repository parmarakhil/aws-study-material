# EventBridge , cloudtrail, config

1. EventBridge
    1. Next Evaluation of Cloudwatch events 
    2. Default event bus
        1. Generated by AWS services I.e Cloudwatch events
    3. Partner Event bus
        1. Receive events from SAAS service or applications
    4. Custom Event bus
        1. For your own application to publish events
    5. Cross account event buses is possible
    6. Rules
        1. How to process events
    7. EventBridge schema registry
        1. EventBridge can analyse the events in the bus and infer the schema
        2. The schema registry allows you to generate code for your applications that will know in advance how data is strutted in the event bus
        3. Schema can be versioned
    8. Vs cloud-watch events
        1. EventBridge builds upon and extends Cloudwatch events
        2. Has extra bus feature and schema registry capability
        3. Later Cloudwatch events will be replaced with EventBridge
    9. It has integration with third party applications also
2. CloudTrail
    1. Way to get governance, compliance and audit for your AWS account
    2. It is enabled by default
    3. Using cloudtrail you can get history of events/API calls made within your AWS account
        1. Console, SDK, CLI, AWS services
    4. Can put logs into Cloudwatch logs or S3
    5. A trail can be applied to all Regions by default or a single region
    6. Events
        1. Management Events
            1. Operations performed on resources in AWS account
            2. By default trails are configured to log management events
            3. Types
                1. Read events
                2. Write events (Modify resources)
        2. Data events
            1. Not logged by default
            2. Eg S3 object level activity
            3. Types
                1. Read events
                2. Write events (delete or put object )
        3. Cloudtrail Insigths Events
            1. You have to enable it
            2. Helps to analyse events to detect unusual activity
            3. It analyses normal management events to create a baseline and then continuously analyse write events to detect unusual patterns
                1. Anomalies appear in coudtrail console
                2. Events can be sent to S3 or event bridge
    7. Retention
        1. Events are stored for 90 days
        2. Post that you need to move them to S3 and use Athena to analyse them
3. AWS Config
    1. Helps with auditing and recording compliance for AWS resources
    2. Helps record configurations and changes over time
    3. You can receive alerts (SNS notifications) for any changes
    4. AWS config is a per-region service
    5. Can be aggregated across regions and accounts
    6. Possibility of storing the configuration data into S3 and analysed by Athena
    7. Rules
        1. AWS managed config rule
        2. Own rule define in AWS lambda
        3. Rules can be evaluated/triggered
            1. For each config change
            2. At regular time intervals
        4. Does not prevent actions from happening (no deny)
    8. Resource
        1. View compliance of resource over time
        2. View Configuration of resource over time
        3. View trail of resource over time by linking with cloud trail
    9. Remediations
        1. Automate remediation of non-compliant resources using SSM automation documents
        2. Use AWS managed automation document
            1. Create own custom automation document
        3. If IAM access key has expired then AWS config can monitor it and trigger a remediation which can trigger a message to IAM to reactive it
        4. You can create a custom automation document that invokes lambda function
    10. Notifications
        1. Use event bridge to trigger notification
        2. Ability to send configuration changes and compliance state notifications to SNS
4. CloudTrail Vs cloudWatch Vs Config
    1. Cloudwatch
        1. Performance monitoring & dashboards
        2. Events & alerting
        3. Log aggregation & analysis
    2. CloudTrail
        1. Record API calls made within your Account by everyone
        2. Can define trails for specific resources
        3. Globals service
    3. Config
        1. Record configuration changes
        2. Evaluate resources against compliance rules
        3. Get timeline of changes and compliance
    4. For an ELB
        1. Cloudwatch
            1. Monitoring incoming connections metric
            2. Visualise error codes as a % over time
            3. Make a dashboard to get an idea of your load balancer performance
        2. Config
            1. Track Security group rules for load balancer
            2. Track configuration changes for load balancer
            3. Ensure a SSL certificate is always assigned to the load balancer for compliance purpose
        3. Cloudtrail
            1. Track who made any changes to the load balancer with API calls
